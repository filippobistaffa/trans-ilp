import numpy as np

def read_data(distance_matrix_csv, time_matrix_csv):
    distance = np.genfromtxt(distance_matrix_csv, delimiter=',', dtype=np.float32).ravel()
    time = np.genfromtxt(time_matrix_csv, delimiter=',', dtype=np.float32).ravel()
    return distance, time

def read_pool(pool_csv):
    pool = np.genfromtxt(pool_csv, delimiter=',', dtype=np.uint32)
    steps = pool[:,0].copy(order='C')
    reqs = pool[:,1].copy(order='C')
    deltas = pool[:,2].copy(order='C')
    return reqs, steps, deltas, 

distance, time = read_data('data/gmaps_distance.csv', 'data/gmaps_time.csv')
reqs, steps, deltas = read_pool('data/pool.csv')

from oracle import oracle
coalitions = [
    [44,85,96,50],
    [23,28,99,60],
    [88,54,99],
    [91,7],
    [16,83,14],
    [7,77],
    [45,40,86,52,47],
    [67],
    [7,55,65,81,85],
    [52,28,99,72],
    [58,39],
    [74,33,22,23,49],
    [1,28,0,83],
    [3,78,92,43,3],
    [21,77,28],
    [93,48,38,60],
    [31,33,47],
    [52],
    [73,64,90,48],
    [62,99,16],
    [4,54,66,50],
    [27,28,40],
    [63,17],
    [28,16,57],
    [60,18,3],
    [54,36,75,37,58],
    [40,15,41],
    [9],
    [38],
    [62,79],
    [89,90,3,54],
    [73,94,66,11,35],
    [18,67,57,47],
    [27],
    [68,84,30,10,93],
    [6,60],
    [39,49],
    [20,34],
    [62],
    [48,6,26,33,49],
    [51],
    [4,46,96,97],
    [94,96,86],
    [81,14,26,63],
    [53],
    [80,96,24,42,45],
    [83,71,60,45],
    [97,5],
    [99,57,36,7,65],
    [17,4],
    [55,72],
    [27,80,50],
    [57,93,54],
    [84,36,2,15,50],
    [53,38,50],
    [9,6,94,83,68],
    [77,34,23,96,58],
    [68,49,1,77],
    [12,33,21,80],
    [78,82],
    [96,72],
    [20],
    [52,36,41],
    [28,77,26,80],
    [10,4,98],
    [6,75,60,96,53],
    [96],
    [68,64,90,22],
    [86,48,90,96,95],
    [24,88,71,83],
    [99,39,80,16,93],
    [26,25,16,38,53],
    [51,85,7,70],
    [68,74,85],
    [42,80],
    [9,24],
    [2,80],
    [25,23,89],
    [69,30,81],
    [33,5],
    [16],
    [51,84],
    [19],
    [57,83],
    [67],
    [29,85,68,8,68],
    [73,51],
    [60,17],
    [36,89],
    [27,30,72,8],
    [79,79,62,75,13],
    [75,42,18,86],
    [74,57,24,43,76],
    [0,84,47,89],
    [17,64],
    [98,40,62],
    [73,45],
    [34,74,44,35,61],
    [72,68,3,76],
    [53],
    [92,99,36,25],
    [70,51,69],
    [94,84,29,56,13],
    [63,42,70],
    [18,73,63],
    [0,73,85,2],
    [27,94],
    [75,89,74,49],
    [31,77],
    [79,99,31,79,57],
    [3,49,70],
    [78,30,25,73],
    [75,96,71,85],
    [31,5,77,46],
    [98,0],
    [93,71,23],
    [78,3,93,98],
    [46,21,62,53],
    [16,95,22,18,13],
    [10,22,54,18,95],
    [58,67,58,45,30],
    [31,54,98,57,40],
    [10,41,99],
    [2,70,27,4],
    [64,88],
    [15],
    [49,77,20,57,91],
    [76,24],
    [45,6,15,35,86],
    [78,95,20,2,27],
    [32,13,97,6,45],
    [56,26,0],
    [22,95,90,7],
    [9,63,16,91,65],
    [84,8,81,91],
    [82,77,73],
    [40,6,64],
    [14,29],
    [67,41,75,90],
    [58,19],
    [70],
    [24],
    [5,73,3],
    [89],
    [74,16,27],
    [10,74,35,41,80],
    [60,15],
    [83],
    [88,56,91,6],
    [80],
    [52,39,9,62,3],
    [2,95,38],
    [46,91,22],
    [14,31],
    [48,22,56],
    [8,56],
    [7,53,22],
    [75,92,29,27],
    [42],
    [0],
    [10],
    [75,38,2,2],
    [91,45],
    [54,47],
    [94,98,72,31,73],
    [9,37,52],
    [21,16],
    [89,94],
    [52,63,55],
    [88,13,63,65,2],
    [71,46,65,96],
    [4,33,63,19],
    [66,4],
    [88,64,75,51,34],
    [10,17,77,11],
    [11,97,91,19,51],
    [92,98,61],
    [23,35,75,3,7],
    [85,5,26,52,89],
    [23],
    [55,37,24,91],
    [79],
    [92,4,30],
    [65,52],
    [73,70],
    [78,14,57,8,47],
    [22,59],
    [40],
    [30],
    [77],
    [42,77,5,60],
    [46,52],
    [70,49,14],
    [24,34],
    [3],
    [95,72],
    [50,96,37,56,54],
    [9,29,15,15],
    [79,87,3,60],
    [38,75,0,5]
]

values = oracle(coalitions, reqs, steps, deltas, distance, time)
print(values)
np.savetxt("values.csv", values, delimiter=",", fmt='%f')

import numpy as np
from oracle import oracle

def read_data(distance_matrix_csv, time_matrix_csv):
    distance = np.genfromtxt(distance_matrix_csv, delimiter=',', dtype=np.float32).ravel()
    time = np.genfromtxt(time_matrix_csv, delimiter=',', dtype=np.float32).ravel()
    return distance, time

def read_pool(pool_csv):
    pool = np.genfromtxt(pool_csv, delimiter=',', dtype=np.uint32)
    steps = pool[:,0].copy(order='C')
    reqs = pool[:,1].copy(order='C')
    deltas = pool[:,2].copy(order='C')
    return reqs, steps, deltas, 

reqs, steps, deltas = read_pool('data/fakeFile.csv')
distance, time = read_data('data/gmaps_distance.csv', 'data/gmaps_time.csv')
def value(coalitions):
    return oracle(coalitions, reqs, steps, deltas, distance, time)
